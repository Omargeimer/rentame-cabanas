{% extends "cabanas/layout.html" %}
{% block titulo %}Perfil{% endblock %}
{% load static %}
{% block contenido %}
    <div class="text-center">
        <div class="h-title h1 fw-normal pb-1">Perfil</div>
        {% if user.imagen %}
            <img class="avatar" width="300" height="300" alt="icono_perfil" src="{{user.imagen.url}}"/>
        {% else %}
            <img class="avatar" width="300" height="300" alt="icono_perfil" src="{% static 'admin_users/images/icono_perfil.webp' %}"/>
        {% endif %}
        <p class="h3 pt-3 font-weight-bold">@{{user.username}}</p>
        <p class="h5 fw-light pb-3"> {{user.first_name}} {{user.last_name}} </p>
        <p><i class="fa-solid fa-phone"></i> {{user.telefono}} </p>
        <p><i class="fa-solid fa-envelope"></i> {{user.email}} </p>

        
        
        <button type="button" class="btn-sample btn mb-3" data-bs-toggle="modal" data-bs-target="#editProfileModal">
            Editar Perfil
        </button>
    </div>

<!-- Vertically centered scrollable modal -->
<div class="modal fade" id="editProfileModal" tabindex="-1" aria-labelledby="editProfileModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="editProfileModalLabel">Editar Perfil</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <form action="" method='post' enctype="multipart/form-data">
                {% csrf_token %}   
                <div class="modal-body">
                    <div class="d-flex">
                        {% if user.imagen %}
                        <img class="mx-auto img-thumbnail mb-3" alt="icono_perfil" src="{{user.imagen.url}}" style="width: 100px; height: 100px; border-radius: 50%; object-fit: cover;"/>
                        {% else %}
                             <img class="avatar" width="300" height="300" alt="icono_perfil" src="{% static 'admin_users/images/icono_perfil.webp' %}"/>
                        {% endif %}
                    </div>

                    <div class="mb-3">
                        <label for="image">Foto de Perfil</label>
                        <input class="form-control" type="file" name="imagen">
                    </div>

                    <div class="d-flex">
                        <div class="mb-3 col-6 mr-2 pe-3">
                            <label for="first_name">Nombre:</label>
                            <input type="text" class="form-control" name="first_name" value="{{user.first_name}}">
                        </div>

                        <div class="col-6 mb-3">
                            <label for="first_name">Apellidos:</label>
                            <input type="text" class="form-control" name="last_name" value="{{user.last_name}}">
                        </div>
                    </div>


                    <div class="d-flex">
                        <div class="mb-3 col-6 pe-3 mr-2">
                            <label for="username">Nombre de Usuario:</label>
                            <input type="text" class="form-control" name="username" value="{{user.username}}">
                        </div>

                        <div class="mb-3 col-6">
                            <label for="email">Número Telefónico:</label>
                            <input type="text" class="form-control" name="telefono" value="{{user.telefono}}">
                        </div>
                    </div>

                    <div class="d-flex">

                        <div class="col-12">
                            <label for="email">Correo Electrónico:</label>
                            <input type="text" class="form-control" name="email" value="{{user.email}}" disabled>
                        </div>
                    </div>

                </div>

            <div class="modal-footer">
                <button type="button" class="btn-secondary btn mb-3" data-bs-dismiss="modal">Cerrar</button>
                <button type="submit" class="btn-sample btn mb-3">Guardar</button>

            </div>
        </form>
        </div>
    </div>
</div>
</div>
{% endblock %}